/*
 * http://localhost:8080/h2-console
 * 
 * JDBC URL: jdbc:h2:mem:testdb
 * 
 */

DROP TABLE SECUENCIAS IF EXISTS;
DROP TABLE RECETAS IF EXISTS;
DROP TABLE INGREDIENTES IF EXISTS;
DROP TABLE RECETAS_INGREDIENTES IF EXISTS;
DROP TABLE RECETA_PASOS IF EXISTS;

CREATE TABLE SECUENCIAS (
	SEQ_NAME								VARCHAR(100)	NOT NULL,
	SEQ_NUMBER								BIGINT			NOT NULL
);

CREATE TABLE RECETAS (
	ID										BIGINT			NOT NULL,
	NOMBRE									VARCHAR(50)		NOT NULL,
	FOTO									VARCHAR(50)		NOT NULL,
	CATEGORIA_RECETA						VARCHAR(50)		NOT NULL,
	TIEMPO_DE_COCCION						INT				NOT NULL,
	TIEMPO_DE_PREPARACION					INT				NOT NULL,
	TEMPERATURA								VARCHAR(50)		NOT NULL,
	DIFICULTAD								VARCHAR(50)		NOT NULL,
	COSTE									DOUBLE			NOT NULL,
	PRIMARY KEY (ID)
);

CREATE TABLE RECETA_PASOS (
	RECETA_ID								BIGINT			NOT NULL,
	INDICE									BIGINT			NOT NULL,
	PASOS									VARCHAR(500)	NOT NULL,
	FOREIGN KEY (RECETA_ID) REFERENCES RECETAS (ID)
);

CREATE TABLE INGREDIENTES (
	ID										BIGINT			NOT NULL,
	NOMBRE									VARCHAR(50)		NOT NULL,
	MEDIDA									VARCHAR(50)		NOT NULL,
	PRIMARY KEY (ID)
);

CREATE TABLE RECETAS_INGREDIENTES (
	ID										BIGINT			NOT NULL,
	ID_RECETA								BIGINT			NOT NULL,
	ID_INGREDIENTE							BIGINT			NOT NULL,
	PRIMARY KEY (ID),
	FOREIGN KEY (ID_RECETA) REFERENCES RECETAS (ID),
	FOREIGN KEY (ID_INGREDIENTE) REFERENCES INGREDIENTES (ID)									
);


